@tailwind base;
@tailwind components;
@tailwind utilities;

/* SecureShield Design System - Dark Cybersecurity Theme */

@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap');

@layer base {
  :root {
    --background: 222 47% 6%;
    --foreground: 210 40% 98%;

    --card: 222 47% 8%;
    --card-foreground: 210 40% 98%;

    --popover: 222 47% 8%;
    --popover-foreground: 210 40% 98%;

    --primary: 174 72% 56%;
    --primary-foreground: 222 47% 6%;

    --secondary: 260 60% 55%;
    --secondary-foreground: 210 40% 98%;

    --muted: 222 30% 14%;
    --muted-foreground: 215 20% 55%;

    --accent: 174 72% 56%;
    --accent-foreground: 222 47% 6%;

    --destructive: 0 72% 51%;
    --destructive-foreground: 210 40% 98%;

    --success: 142 72% 45%;
    --success-foreground: 222 47% 6%;

    --warning: 38 92% 50%;
    --warning-foreground: 222 47% 6%;

    --threat: 0 84% 60%;
    --threat-foreground: 210 40% 98%;

    --border: 222 30% 18%;
    --input: 222 30% 18%;
    --ring: 174 72% 56%;

    --radius: 0.75rem;

    /* Glass effect variables */
    --glass-bg: 222 47% 10% / 0.6;
    --glass-border: 174 72% 56% / 0.15;
    --glass-glow: 174 72% 56%;

    /* Glow intensities */
    --glow-sm: 0 0 10px hsl(var(--primary) / 0.3);
    --glow-md: 0 0 20px hsl(var(--primary) / 0.4);
    --glow-lg: 0 0 40px hsl(var(--primary) / 0.5);
    --glow-threat: 0 0 20px hsl(var(--threat) / 0.5);
    --glow-success: 0 0 20px hsl(var(--success) / 0.5);
    --glow-warning: 0 0 20px hsl(var(--warning) / 0.5);

    --sidebar-background: 222 47% 8%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 174 72% 56%;
    --sidebar-primary-foreground: 222 47% 6%;
    --sidebar-accent: 222 30% 14%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 222 30% 18%;
    --sidebar-ring: 174 72% 56%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Inter', sans-serif;
  }

  code, pre, .font-mono {
    font-family: 'JetBrains Mono', monospace;
  }
}

@layer components {
  /* Glassmorphism card */
  .glass-card {
    @apply relative overflow-hidden rounded-xl;
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(20px);
    border: 1px solid hsl(var(--glass-border));
  }

  .glass-card::before {
    content: '';
    /*
      IMPORTANT: this is a purely visual overlay.
      It must NEVER capture pointer events, otherwise buttons/inputs inside the card become unclickable.
    */
    @apply absolute inset-0 rounded-xl opacity-0 transition-opacity duration-300;
    pointer-events: none;
    z-index: 0;
    background: linear-gradient(
      135deg,
      hsl(var(--primary) / 0.1) 0%,
      transparent 50%,
      hsl(var(--secondary) / 0.1) 100%
    );
  }

  .glass-card:hover::before {
    @apply opacity-100;
  }

  /* Ensure all card content sits above visual overlays */
  .glass-card > * {
    position: relative;
    z-index: 1;
  }

  /*
    Defensive UI rule:
    Interactive elements must always be clickable inside glass cards.
    This prevents accidental overlays (gradients/borders) from trapping pointer events.
  */
  .glass-card button:not(:disabled),
  .glass-card [role="button"],
  .glass-card a,
  .glass-card input,
  .glass-card textarea {
    position: relative;
    z-index: 2;
  }

  /* Glow button effect */
  .glow-button {
    @apply relative transition-all duration-300;
    box-shadow: var(--glow-sm);
  }

  .glow-button:hover {
    box-shadow: var(--glow-md);
    transform: translateY(-2px);
  }

  .glow-button:active {
    transform: translateY(0);
  }

  /* Status indicators */
  .status-protected {
    @apply bg-success/20 text-success border border-success/30;
    box-shadow: var(--glow-success);
  }

  .status-warning {
    @apply bg-warning/20 text-warning border border-warning/30;
    box-shadow: var(--glow-warning);
  }

  .status-threat {
    @apply bg-threat/20 text-threat border border-threat/30;
    box-shadow: var(--glow-threat);
  }

  /* Terminal style */
  .terminal {
    @apply font-mono text-sm bg-background/80 rounded-lg p-4 border border-border;
    text-shadow: 0 0 5px hsl(var(--primary) / 0.5);
  }

  .terminal-line::before {
    content: '>';
    @apply text-primary mr-2;
  }

  /* Animated border glow */
  .animated-border {
    @apply relative;
  }

  .animated-border::after {
    content: '';
    @apply absolute inset-0 rounded-xl opacity-0 transition-opacity duration-500;
    /* Visual border only — must not block interactions */
    pointer-events: none;
    z-index: 0;
    background: linear-gradient(90deg, 
      hsl(var(--primary)), 
      hsl(var(--secondary)), 
      hsl(var(--primary))
    );
    background-size: 200% 100%;
    animation: borderGlow 3s linear infinite;
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    padding: 2px;
    border-radius: inherit;
  }

  .animated-border:hover::after {
    @apply opacity-100;
  }

  /* Pulse animation for active states */
  .pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  /* Scan line effect */
  .scan-line {
    @apply relative overflow-hidden;
  }

  .scan-line::after {
    content: '';
    @apply absolute left-0 right-0 h-px bg-primary/30;
    /* Visual scan line only — must not block interactions */
    pointer-events: none;
    animation: scanLine 3s linear infinite;
  }
}

@layer utilities {
  .text-glow {
    text-shadow: 0 0 10px hsl(var(--primary) / 0.5);
  }

  .text-glow-threat {
    text-shadow: 0 0 10px hsl(var(--threat) / 0.5);
  }

  .text-glow-success {
    text-shadow: 0 0 10px hsl(var(--success) / 0.5);
  }

  .animate-shake {
    animation: shake 0.35s ease-in-out;
  }
}

@keyframes borderGlow {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

@keyframes pulseGlow {
  0%, 100% { opacity: 1; box-shadow: var(--glow-sm); }
  50% { opacity: 0.8; box-shadow: var(--glow-lg); }
}

@keyframes scanLine {
  0% { top: -10%; }
  100% { top: 110%; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}
